{{ define "title" }} Tofus Blog {{ end }}
<br />
{{ define "body" }}

<div>
    <div
        class="text-black flex flex-col-reverse lg:flex-row lg:gap-7 max-w-[73%] mx-auto mt-5"
    >
        <div class="w-full">
            <!-- Left -->
            <div>
                <!-- Post List -->
                {{ range $e := .posts }}
                <div
                    class="card relative py-3 pl-10 box-content border border-transparent hover:border-gray-300"
                >
                    <!-- Top-left menu -->
                    <div class="dropdown-toggle-wrapper">
                        <input
                            type="checkbox"
                            id="dropdown-{{.ID}}"
                            style="display: none"
                            class="dropdown-checkbox"
                        />
                        <label
                            for="dropdown-{{.ID}}"
                            class="dropdown-toggle absolute top-2 right-2 hover:bg-gray-200 p-2 rounded-lg box-content cursor-pointer"
                        >
                            <!-- Open Svg -->
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                fill="currentColor"
                                class="open"
                                viewBox="0 0 16 16"
                                data-id="{{.ID}}"
                            >
                                <path
                                    d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"
                                />
                            </svg>
                            <!-- Close Svg -->
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                fill="currentColor"
                                class="close"
                                viewBox="0 0 16 16"
                            >
                                <path
                                    d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"
                                />
                            </svg>
                        </label>
                        <div
                            class="dropdown-options absolute top-2 right-12 flex flex-row-reverse gap-2"
                        >
                            <div class="hover:bg-blue-200 dropdown-item">
                                <!-- Edit -->
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    fill="currentColor"
                                    class="bi bi-pencil"
                                    viewBox="0 0 16 16"
                                >
                                    <path
                                        d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"
                                    />
                                </svg>
                            </div>
                            <div class="hover:bg-red-200 dropdown-item">
                                <!-- Delete -->
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    fill="currentColor"
                                    class="bi bi-trash3"
                                    viewBox="0 0 16 16"
                                >
                                    <path
                                        d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"
                                    />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- Likes -->
                    <div
                        class="absolute top-0 left-0 z-10 w-6 h-full bg-white rounded-l-lg flex flex-col pl-3 pt-5 items-center"
                    >
                        <!-- Up Arrow -->
                        <button class="p-[1px] py-1 rounded hover:bg-gray-200">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                fill="currentColor"
                                viewBox="0 0 16 16"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"
                                />
                            </svg>
                        </button>
                        <!-- Votes -->
                        <p class="text-sm font-medium" id="post-likes-{{.ID}}">
                            {{ fmt_likes .Likes}}
                        </p>
                        <!-- Down Arrow -->
                        <button class="p-[1px] py-1 rounded hover:bg-gray-200">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                fill="currentColor"
                                viewBox="0 0 16 16"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"
                                />
                            </svg>
                        </button>
                    </div>

                    <!-- Body -->
                    <a href="/posts/{{.Slug}}">
                        <div class="cursor-pointer">
                            <p class="text-2xl font-medium">{{.Title}}</p>

                            <!-- whitespace-pre-line -->
                            <p class="break-all">{{ truncateStr .Body }}</p>

                            <div
                                class="pt-1 font-light text-gray-800 text-sm w-full rounded-b-lg flex"
                            >
                                {{.CreatedAt.Format "Jan 02, 2006"}} -
                                {{.Author}}
                            </div>
                        </div>
                    </a>
                </div>
                {{else}}
                <div class="card">No Posts Yet.</div>
                {{ end }}
            </div>
        </div>
        {{ $length := len .posts }} {{ if gt $length 0 }}
        <div class="lg:w-[45%]">
            <!-- Right -->
            <div class="card">
                <h2 class="text-xl pb-1 w-full">Your Posts</h2>
                <p class="italic">work in progress...</p>
            </div>
        </div>
        {{ end }}
    </div>
</div>

<script src="static/js/posts.js"></script>
{{ end }}
